<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ByHer.AI - Precision Architecture</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @keyframes slide {
            0% { left: -33%; }
            100% { left: 100%; }
        }
        .animate-slide {
            animation: slide 1.5s infinite linear;
        }
        body {
            background-color: #020617; /* slate-950 */
        }
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        const { useState, useEffect, useRef } = React;
        
        // --- INLINE ICONS ---
        const IconBase = ({ children, size = 24, className = "", onClick }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} onClick={onClick}>
                {children}
            </svg>
        );

        const Shield = (p) => <IconBase {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" /></IconBase>;
        const Server = (p) => <IconBase {...p}><rect width="20" height="8" x="2" y="2" rx="2" ry="2"/><rect width="20" height="8" x="2" y="14" rx="2" ry="2"/><line x1="6" x2="6.01" y1="6" y2="6"/><line x1="6" x2="6.01" y1="18" y2="18"/></IconBase>;
        const Database = (p) => <IconBase {...p}><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></IconBase>;
        const Cpu = (p) => <IconBase {...p}><rect width="16" height="16" x="4" y="4" rx="2"/><rect width="6" height="6" x="9" y="9" rx="1"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></IconBase>;
        const CheckCheck = (p) => <IconBase {...p}><path d="M18 6 7 17l-5-5"/><path d="m22 10-7.5 7.5L13 16"/></IconBase>;
        const Terminal = (p) => <IconBase {...p}><polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/></IconBase>;
        const XCircle = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></IconBase>;
        const Target = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></IconBase>;
        const Activity = (p) => <IconBase {...p}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></IconBase>;
        const ChevronRight = (p) => <IconBase {...p}><path d="m9 18 6-6-6-6"/></IconBase>;
        const ArrowRight = (p) => <IconBase {...p}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></IconBase>;
        const Microscope = (p) => <IconBase {...p}><path d="M6 18h8"/><path d="M3 22h18"/><path d="M14 22a7 7 0 1 0 0-14h-1"/><path d="M9 14h2"/><path d="M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z"/><path d="M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3"/></IconBase>;
        const ToggleLeft = (p) => <IconBase {...p}><rect width="20" height="12" x="2" y="6" rx="6" ry="6"/><circle cx="8" cy="12" r="2"/></IconBase>;
        const ToggleRight = (p) => <IconBase {...p}><rect width="20" height="12" x="2" y="6" rx="6" ry="6"/><circle cx="16" cy="12" r="2"/></IconBase>;
        const AlertOctagon = (p) => <IconBase {...p}><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></IconBase>;
        const Settings = (p) => <IconBase {...p}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></IconBase>;

        // --- CONSTANTS ---
        const STAGES = {
          IDLE: 'idle',
          FILTERING: 'filtering',
          QUEUING: 'queuing',
          RAG: 'rag',
          GENERATING: 'generating',
          VERIFYING: 'verifying',
          COMPLETE: 'complete',
          OUT_OF_DOMAIN: 'out_of_domain'
        };

        // --- COMPONENTS ---

        const ArchitectureNode = ({ icon: Icon, label, isActive, status, description, isDisabled }) => {
          let statusColor = "text-slate-500 border-slate-700 bg-slate-900/50";
          let glow = "";
          let opacity = "opacity-100";

          if (isDisabled) {
            opacity = "opacity-30 grayscale";
            statusColor = "text-slate-700 border-slate-800 bg-slate-950";
          } else {
            if (isActive) {
              statusColor = "text-blue-400 border-blue-400 bg-blue-900/30";
              glow = "shadow-[0_0_20px_rgba(56,189,248,0.3)]";
            }
            if (status === 'success') {
              statusColor = "text-emerald-400 border-emerald-400 bg-emerald-900/30";
            }
            if (status === 'error' || status === 'blocked') {
              statusColor = "text-amber-400 border-amber-400 bg-amber-900/30";
            }
          }

          return (
            <div className={`relative flex flex-col items-center p-4 border rounded-xl transition-all duration-300 ${statusColor} ${glow} ${opacity} w-24 md:w-32`}>
              <Icon size={28} className="mb-2" />
              <span className="text-[10px] font-bold uppercase tracking-wider">{label}</span>
              {isDisabled && (
                <div className="absolute inset-0 flex items-center justify-center">
                    <XCircle className="text-slate-700" size={40} strokeWidth={1} />
                </div>
              )}
              {isActive && (
                <div className="absolute -bottom-16 bg-slate-800 text-[10px] p-2 rounded text-slate-200 w-40 text-center z-10 border border-slate-600 shadow-xl">
                  {description}
                </div>
              )}
            </div>
          );
        };

        const ConnectionLine = ({ active, skipped }) => (
          <div className="flex-1 h-0.5 bg-slate-700 relative overflow-hidden mx-1">
            {skipped ? (
                <div className="absolute top-0 left-0 w-full h-full border-b border-dashed border-slate-600"></div>
            ) : active && (
              <div className="absolute top-0 left-0 h-full w-1/3 bg-blue-400 animate-slide"></div>
            )}
          </div>
        );

        const LogEntry = ({ timestamp, source, message, type }) => {
          let color = "text-slate-300";
          if (type === 'error') color = "text-amber-400";
          if (type === 'success') color = "text-emerald-400";
          if (type === 'system') color = "text-blue-400";
          if (type === 'warning') color = "text-orange-400";

          return (
            <div className="font-mono text-xs mb-1 border-l-2 border-slate-700 pl-2 hover:bg-slate-800/50 transition-colors">
              <span className="text-slate-500">[{timestamp}]</span>{' '}
              <span className="font-bold text-slate-400">{source}:</span>{' '}
              <span className={color}>{message}</span>
            </div>
          );
        };

        function ByHerApp() {
          const [view, setView] = useState('landing');
          const [input, setInput] = useState('');
          const [messages, setMessages] = useState([
            { role: 'system', text: 'ByHer Precision Core v2.5 online. I can verify facts or just chat. How can I help?' }
          ]);
          const [logs, setLogs] = useState([]);
          const [currentStage, setCurrentStage] = useState(STAGES.IDLE);
          const [precisionMode, setPrecisionMode] = useState(true);
          const [apiKey, setApiKey] = useState('');
          const [showSettings, setShowSettings] = useState(false);
          
          const logsEndRef = useRef(null);

          useEffect(() => {
            logsEndRef.current?.scrollIntoView({ behavior: 'smooth' });
          }, [logs]);

          const addLog = (source, message, type = 'info') => {
            const timestamp = new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute:'2-digit', second:'2-digit' });
            setLogs(prev => [...prev, { timestamp, source, message, type }]);
          };

          const callGemini = async (userPrompt, context = "") => {
             // Use user provided key, or empty string (which will likely fail if hosted remotely without env vars)
             // If you are running in the "Immersive" preview on the platform, the key might be injected.
             // If hosting on GitHub, USER MUST PROVIDE KEY via Settings.
             
             if (!apiKey) {
                 return "Please click the Settings (Gear icon) and enter your Gemini API Key to enable the AI brain.";
             }

             const systemInstruction = precisionMode 
                ? `You are ByHer, a high-precision AI. Your goal is ACCURACY. 
                   CONTEXT: ${context}
                   INSTRUCTIONS: If the user asks for facts, stick to the provided context or general verifiable truths. 
                   If the context is empty, use your general knowledge but be conservative.
                   If the user just wants to chat (say hello, joke), be friendly and conversational.`
                : `You are a creative, open-ended AI assistant. You can write poems, tell jokes, and chat freely. 
                   You do not need to be strictly formal. Have fun.`;

             try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: userPrompt }] }],
                        systemInstruction: { parts: [{ text: systemInstruction }] }
                    })
                });
                
                const data = await response.json();
                
                if (data.error) {
                    addLog('API_ERROR', data.error.message, 'error');
                    return `Error: ${data.error.message}`;
                }

                return data.candidates?.[0]?.content?.parts?.[0]?.text || "No response generated.";
             } catch (error) {
                 addLog('NETWORK_ERROR', error.message, 'error');
                 return "Connection failed. Please check your API Key and internet.";
             }
          };

          const processRequest = async () => {
            if (!input.trim()) return;
            
            const userPrompt = input;
            setInput('');
            setMessages(prev => [...prev, { role: 'user', text: userPrompt }]);
            setLogs([]); 
            
            if (precisionMode) {
                // --- PRECISION MODE: FULL PIPELINE ---
                
                // 1. OPTIMIZER: Check for malicious intent (relaxed for normal chat)
                setCurrentStage(STAGES.FILTERING);
                addLog('OPTIMIZER', 'Scanning intent...', 'system');
                await new Promise(r => setTimeout(r, 600));

                const forbiddenTerms = ['inject', 'ignore instructions', 'system override']; // Minimal filter
                if (forbiddenTerms.some(term => userPrompt.toLowerCase().includes(term))) {
                    setCurrentStage(STAGES.OUT_OF_DOMAIN);
                    addLog('OPTIMIZER', `Malicious pattern detected.`, 'error');
                    setMessages(prev => [...prev, { role: 'error', text: 'Security Block: Request violated safety protocols.' }]);
                    setTimeout(() => setCurrentStage(STAGES.IDLE), 2000);
                    return;
                }
                addLog('OPTIMIZER', 'Intent valid. Proceeding.', 'success');

                // 2. QUEUE & RAG (Simulated Context Retrieval)
                setCurrentStage(STAGES.QUEUING);
                await new Promise(r => setTimeout(r, 400)); 
                setCurrentStage(STAGES.RAG);
                addLog('VECTOR_DB', 'Checking knowledge base...', 'info');
                
                // Simulated RAG hit
                let context = "";
                if (userPrompt.toLowerCase().includes("byher")) {
                     context = "ByHer is an AI precision platform founded in Zurich in 2024.";
                     addLog('VECTOR_DB', 'Retrieved proprietary context.', 'success');
                } else {
                     addLog('VECTOR_DB', 'No local context found. Using General Knowledge.', 'warning');
                }
                await new Promise(r => setTimeout(r, 800));

                // 3. GENERATION (Real API Call)
                setCurrentStage(STAGES.GENERATING);
                addLog('LLM_CORE', 'Synthesizing response...', 'system');
                const aiText = await callGemini(userPrompt, context);

                // 4. VERIFICATION
                setCurrentStage(STAGES.VERIFYING);
                addLog('VERIFIER', 'Cross-referencing output...', 'system');
                await new Promise(r => setTimeout(r, 800));
                addLog('VERIFIER', 'Output verified.', 'success');

                // COMPLETE
                setCurrentStage(STAGES.COMPLETE);
                setMessages(prev => [...prev, { role: 'assistant', text: aiText }]);

            } else {
                // --- STANDARD MODE: BYPASS PIPELINE ---
                addLog('SYSTEM', 'Precision Protocol DISABLED.', 'warning');
                setCurrentStage(STAGES.GENERATING);
                addLog('LLM_CORE', 'Generating uncensored response...', 'system');
                
                const aiText = await callGemini(userPrompt, ""); // No context, standard mode
                
                setCurrentStage(STAGES.COMPLETE);
                setMessages(prev => [...prev, { role: 'assistant', text: aiText, warning: true }]);
            }
            
            setTimeout(() => setCurrentStage(STAGES.IDLE), 3000);
          };

          if (view === 'landing') {
            return (
              <div className="min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-blue-500/30">
                <nav className="border-b border-slate-800 p-6 flex justify-between items-center bg-slate-950/80 backdrop-blur sticky top-0 z-50">
                  <div className="flex items-center gap-3">
                    <Shield className="text-blue-500" size={32} />
                    <span className="text-2xl font-bold tracking-tight">BYHER<span className="text-blue-500">.AI</span></span>
                  </div>
                  <button onClick={() => setView('console')} className="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg font-medium transition-all shadow-lg shadow-blue-900/20 flex items-center gap-2">
                    Launch Precision Console <ArrowRight size={18} />
                  </button>
                </nav>
                <main className="max-w-7xl mx-auto px-6 pt-20 pb-32">
                  <div className="grid md:grid-cols-2 gap-16 items-center">
                    <div>
                      <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-900/30 border border-blue-800 text-blue-400 text-sm font-medium mb-6">
                        <CheckCheck size={14} /> 99.9% Factual Accuracy
                      </div>
                      <h1 className="text-6xl font-bold leading-tight mb-6 text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-400">
                        AI That Doesn't<br />Guess.
                      </h1>
                      <p className="text-xl text-slate-400 mb-8 leading-relaxed">
                        Standard LLMs hallucinate. <strong>ByHer</strong> verifies. <br/>
                        We built the first AI architecture dedicated to precision.
                      </p>
                      <div className="flex gap-4">
                        <button onClick={() => setView('console')} className="bg-white text-slate-950 px-8 py-4 rounded-lg font-bold text-lg hover:bg-slate-200 transition-colors">Start Prototype</button>
                      </div>
                    </div>
                    <div className="relative">
                      <div className="absolute inset-0 bg-blue-500/10 blur-3xl rounded-full"></div>
                      <div className="relative bg-slate-900 border border-slate-700 rounded-2xl p-8 shadow-2xl">
                        <div className="flex items-center justify-between mb-8 border-b border-slate-800 pb-4">
                            <div className="flex gap-2">
                                <div className="w-3 h-3 rounded-full bg-slate-600"></div><div className="w-3 h-3 rounded-full bg-slate-600"></div>
                            </div>
                            <div className="text-slate-500 font-mono text-xs">byher_verifier_v2.5</div>
                        </div>
                        <div className="space-y-4 font-mono text-sm">
                          <div className="flex gap-4 items-center text-slate-400"><Microscope size={16} className="text-blue-500" /> <span>Signal Optimizer: <span className="text-blue-400">CLEAR</span></span></div>
                          <div className="flex gap-4 items-center text-slate-400"><CheckCheck size={16} className="text-blue-500" /> <span>Fact Verifier: <span className="text-blue-400">PASSED</span></span></div>
                          <div className="h-px bg-slate-800 my-4"></div>
                          <div className="p-4 bg-slate-950 rounded border border-slate-800 text-slate-300">
                            {'>'} User: "What is the capital of Mars?"<br/>
                            <span className="text-amber-400">{'>'} ByHer: [FLAGGED] No verified capital exists.</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </main>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-slate-950 text-slate-200 font-sans flex flex-col relative">
              {/* Settings Modal */}
              {showSettings && (
                  <div className="absolute inset-0 z-50 bg-black/80 flex items-center justify-center p-4">
                      <div className="bg-slate-900 border border-slate-700 p-6 rounded-xl w-full max-w-md shadow-2xl">
                          <h2 className="text-xl font-bold mb-4 text-white">System Configuration</h2>
                          <p className="text-sm text-slate-400 mb-4">To enable the AI brain on GitHub/Localhost, you must provide a Google Gemini API Key. (It is stored only in your browser memory).</p>
                          <label className="block text-xs font-bold text-slate-500 uppercase mb-2">Gemini API Key</label>
                          <input 
                            type="password" 
                            value={apiKey} 
                            onChange={(e) => setApiKey(e.target.value)} 
                            className="w-full bg-slate-950 border border-slate-700 rounded p-3 text-white focus:border-blue-500 outline-none mb-6"
                            placeholder="AIzaSy..."
                          />
                          <button onClick={() => setShowSettings(false)} className="w-full bg-blue-600 hover:bg-blue-500 text-white py-3 rounded-lg font-bold">Save & Close</button>
                      </div>
                  </div>
              )}

              <header className="h-16 border-b border-slate-800 bg-slate-900 flex items-center justify-between px-6">
                <div className="flex items-center gap-3">
                   <button onClick={() => setView('landing')} className="text-slate-400 hover:text-white mr-4"><ChevronRight className="rotate-180" size={20} /></button>
                   <Shield className="text-blue-500" />
                   <h1 className="font-bold tracking-wider hidden md:block">BYHER<span className="font-light text-slate-500">_CONSOLE</span></h1>
                </div>
                <div className="flex items-center gap-6 text-xs font-mono text-slate-500">
                    <div className={`flex items-center gap-2 px-3 py-1 rounded-full cursor-pointer transition-colors ${precisionMode ? 'bg-blue-900/40 border border-blue-500/50' : 'bg-slate-800 border border-slate-700'}`} onClick={() => setPrecisionMode(!precisionMode)}>
                        <span className={precisionMode ? "text-blue-400" : "text-slate-500"}>Precision Protocol</span>
                        {precisionMode ? <ToggleRight className="text-blue-400" /> : <ToggleLeft className="text-slate-500" />}
                    </div>
                    <button onClick={() => setShowSettings(true)} className="hover:text-white transition-colors"><Settings size={20} /></button>
                </div>
              </header>

              <main className="flex-1 flex overflow-hidden flex-col md:flex-row">
                <section className="w-full md:w-1/3 flex flex-col border-r border-slate-800 bg-slate-900/50 h-1/2 md:h-auto">
                  <div className="flex-1 overflow-y-auto p-4 space-y-4">
                    {messages.map((m, i) => (
                      <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                        <div className={`max-w-[85%] p-3 rounded-lg text-sm ${
                          m.role === 'user' ? 'bg-blue-600 text-white' : 
                          m.role === 'error' ? 'bg-amber-900/50 text-amber-200 border border-amber-700' :
                          m.warning ? 'bg-slate-800 text-slate-300 border border-amber-500/30' : 
                          'bg-slate-800 text-slate-200 border border-slate-700'
                        }`}>
                          {m.role === 'assistant' && ( m.warning ? <AlertOctagon size={14} className="inline mr-2 mb-1 text-amber-400"/> : <CheckCheck size={14} className="inline mr-2 mb-1 text-blue-400"/> )}
                          {m.text}
                        </div>
                      </div>
                    ))}
                  </div>
                  <div className="p-4 border-t border-slate-800 bg-slate-900">
                    <div className="relative">
                      <input type="text" value={input} onChange={(e) => setInput(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && processRequest()} placeholder="Enter query..." className={`w-full bg-slate-950 border rounded-lg pl-4 pr-12 py-3 text-sm focus:outline-none font-mono text-slate-300 transition-colors ${precisionMode ? 'border-slate-700 focus:border-blue-500' : 'border-amber-900/50 focus:border-amber-500'}`} disabled={currentStage !== STAGES.IDLE} />
                      <button onClick={processRequest} disabled={currentStage !== STAGES.IDLE} className={`absolute right-2 top-2 p-1 rounded transition-colors text-slate-400 hover:text-white disabled:opacity-50 ${precisionMode ? 'bg-slate-800 hover:bg-blue-600' : 'bg-slate-800 hover:bg-amber-600'}`}>
                        <ChevronRight size={20} />
                      </button>
                    </div>
                  </div>
                </section>

                <section className="flex-1 flex flex-col bg-slate-950 relative overflow-hidden h-1/2 md:h-auto border-t md:border-t-0 border-slate-800">
                  <div className="absolute inset-0 bg-[linear-gradient(rgba(30,41,59,0.5)_1px,transparent_1px),linear-gradient(90deg,rgba(30,41,59,0.5)_1px,transparent_1px)] bg-[size:40px_40px] opacity-20 pointer-events-none"></div>
                  <div className="flex-1 flex flex-col items-center justify-center p-4 relative z-10 overflow-x-auto">
                    <h2 className="absolute top-4 left-6 text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2">
                      <Activity size={14} /> Live Pipeline
                    </h2>
                    <div className="flex items-center gap-1 md:gap-4 min-w-[600px]">
                      <ArchitectureNode icon={Target} label="Optimizer" isDisabled={!precisionMode} isActive={currentStage === STAGES.FILTERING} status={currentStage === STAGES.OUT_OF_DOMAIN ? 'blocked' : 'default'} description="Intent Analysis" />
                      <ConnectionLine active={currentStage === STAGES.QUEUING} skipped={!precisionMode} />
                      <ArchitectureNode icon={Server} label="Queue" isActive={currentStage === STAGES.QUEUING} description="Async Buffer" />
                      <ConnectionLine active={currentStage === STAGES.RAG} skipped={!precisionMode} />
                      <ArchitectureNode icon={Database} label="Vector DB" isDisabled={!precisionMode} isActive={currentStage === STAGES.RAG} description="Context Retrieval" />
                      <ConnectionLine active={currentStage === STAGES.GENERATING} />
                      <ArchitectureNode icon={Cpu} label="LLM Core" isActive={currentStage === STAGES.GENERATING} description="Synthesis" />
                      <ConnectionLine active={currentStage === STAGES.VERIFYING} skipped={!precisionMode} />
                      <ArchitectureNode icon={CheckCheck} label="Verifier" isDisabled={!precisionMode} isActive={currentStage === STAGES.VERIFYING} status={currentStage === STAGES.COMPLETE ? 'success' : 'default'} description="Fact Check" />
                    </div>
                  </div>
                  <div className="h-48 bg-slate-900 border-t border-slate-800 flex flex-col font-mono text-sm">
                    <div className="px-4 py-2 bg-slate-800 border-b border-slate-700 flex justify-between items-center text-xs text-slate-400">
                      <div className="flex items-center gap-2"><Terminal size={14} />SYSTEM_LOGS</div>
                      <div className="flex gap-4"><span>PID: 4092</span></div>
                    </div>
                    <div className="flex-1 overflow-y-auto p-4 space-y-1 custom-scrollbar">
                      {logs.length === 0 && <div className="text-slate-600 italic">Ready...</div>}
                      {logs.map((log, i) => (<LogEntry key={i} {...log} />))}
                      <div ref={logsEndRef} />
                    </div>
                  </div>
                </section>
              </main>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ByHerApp />);
    </script>
</body>
</html>
